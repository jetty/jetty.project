<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "https://jetty.org/configure_10_0.dtd">

<!-- =============================================================== -->
<!-- Add Brotli support into the Compression Handler                 -->
<!-- =============================================================== -->

<Configure id="Server" class="org.eclipse.jetty.server.Server">
  <Ref refid="CompressionHandler">
    <Call name="addCompression">
      <Arg>
        <New id="brotliCompression" class="org.eclipse.jetty.compression.brotli.BrotliCompression">
          <Set name="minCompressSize" property="jetty.brotli.minCompressSize"/>
          <Set name="defaultDecoderConfig">
            <New id="brotliDefaultDecoderConfig" class="org.eclipse.jetty.compression.brotli.BrotliDecoderConfig">
              <Set name="bufferSize" property="jetty.brotli.decoder.bufferSize"/>
            </New>
          </Set>
          <Set name="defaultEncoderConfig">
            <New id="brotliDefaultEncoderConfig" class="org.eclipse.jetty.compression.brotli.BrotliEncoderConfig">
              <Set name="bufferSize" property="jetty.brotli.encoder.bufferSize"/>
              <Set name="compressionLevel" property="jetty.brotli.encoder.compressionLevel"/>
              <Set name="strategy" property="jetty.brotli.encoder.strategy"/>
              <Set name="lgWindow" property="jetty.brotli.encoder.lgWindow"/>
            </New>
          </Set>
        </New>
      </Arg>
    </Call>
  </Ref>
</Configure>


