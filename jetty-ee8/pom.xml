<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <parent>
    <groupId>org.eclipse.jetty</groupId>
    <artifactId>jetty-project</artifactId>
    <version>12.0.0-SNAPSHOT</version>
  </parent>

  <modelVersion>4.0.0</modelVersion>
  <groupId>org.eclipse.jetty.ee8</groupId>
  <artifactId>jetty-ee8</artifactId>
  <name>EE8 :: Parent</name>
  <packaging>pom</packaging>

  <properties>
    <jetty.servlet.api.version>4.0.6</jetty.servlet.api.version>
    <jakarta.transaction-api.version>1.3.3</jakarta.transaction-api.version>
    <jakarta.annotation.api.version>1.3.5</jakarta.annotation.api.version>
    <jakarta.websocket.api.version>1.1.2</jakarta.websocket.api.version>
    <!-- generated sources cannot follow exactly Jetty code style -->
    <checkstyle.skip>true</checkstyle.skip>
    <sonar.skip>true</sonar.skip>
    <ee9.module></ee9.module>
  </properties>

  <modules>
    <module>jetty-ee8-nested</module>
    <module>jetty-ee8-security</module>
    <module>jetty-ee8-servlet</module>
    <module>jetty-ee8-servlets</module>
    <module>jetty-ee8-webapp</module>
    <module>jetty-ee8-jaas</module>
    <module>jetty-ee8-plus</module>
    <module>jetty-ee8-annotations</module>
    <module>jetty-ee8-websocket</module>
    <module>jetty-ee8-bom</module>
  </modules>

  <build>
    <sourceDirectory>${project.build.directory}/generated-sources/ee8</sourceDirectory>
    <testSourceDirectory>${project.build.directory}/generated-test-sources/ee8</testSourceDirectory>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.eclipse.jetty.toolchain</groupId>
          <artifactId>jetty-modify-sources-maven-plugin</artifactId>
          <version>1.0.0-SNAPSHOT</version>
        </plugin>
      </plugins>
    </pluginManagement>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-resources-plugin</artifactId>
        <executions>
          <execution>
            <id>copy-ee8-resources</id>
            <phase>generate-resources</phase>
            <goals>
              <goal>copy-resources</goal>
            </goals>
            <configuration>
              <outputDirectory>${project.build.outputDirectory}</outputDirectory>
              <resources>
                <resource>
                  <directory>${maven.multiModuleProjectDirectory}/jetty-ee9/${ee9.module}/src/main/resources</directory>
                </resource>
              </resources>
            </configuration>
          </execution>
          <execution>
            <id>copy-ee8-test-resources</id>
            <phase>generate-test-resources</phase>
            <goals>
              <goal>copy-resources</goal>
            </goals>
            <configuration>
              <outputDirectory>${project.build.testOutputDirectory}</outputDirectory>
              <resources>
                <resource>
                  <directory>${maven.multiModuleProjectDirectory}/jetty-ee9/${ee9.module}/src/test/resources</directory>
                </resource>
              </resources>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.eclipse.jetty.toolchain</groupId>
        <artifactId>jetty-modify-sources-maven-plugin</artifactId>
        <executions>
          <execution>
            <id>generate-ee8-sources</id>
            <phase>generate-sources</phase>
            <goals>
              <goal>modify-sources-ee9-to-ee8</goal>
            </goals>
            <configuration>
              <sourceProjectLocation>${maven.multiModuleProjectDirectory}/jetty-ee9/${ee9.module}/src/main/java</sourceProjectLocation>
              <outputDirectory>${project.build.sourceDirectory}</outputDirectory>
            </configuration>
          </execution>
          <execution>
            <id>generate-ee8-test-sources</id>
            <phase>generate-test-sources</phase>
            <goals>
              <goal>modify-sources-ee9-to-ee8</goal>
            </goals>
            <configuration>
              <testSources>true</testSources>
              <sourceProjectLocation>${maven.multiModuleProjectDirectory}/jetty-ee9/${ee9.module}/src/test/java</sourceProjectLocation>
              <outputDirectory>${project.build.testSourceDirectory}</outputDirectory>
            </configuration>
          </execution>
          <execution>
            <id>modify-services-loader-ee9-to-ee8</id>
            <phase>process-resources</phase>
            <goals>
              <goal>modify-service-loader-files-ee9-to-ee8</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <!-- see issue #8209 -->
      <plugin>
        <artifactId>maven-surefire-plugin</artifactId>
        <configuration>
          <skipTests>true</skipTests>
        </configuration>
      </plugin>
    </plugins>
  </build>

  <dependencyManagement>

      <!-- Jetty EE 8 Dependencies -->
      <dependencies>
        <dependency>
          <groupId>org.eclipse.jetty.toolchain</groupId>
          <artifactId>jetty-servlet-api</artifactId>
          <version>${jetty.servlet.api.version}</version>
        </dependency>
        <dependency>
          <groupId>jakarta.transaction</groupId>
          <artifactId>jakarta.transaction-api</artifactId>
          <version>${jakarta.transaction-api.version}</version>
        </dependency>
        <dependency>
          <groupId>jakarta.annotation</groupId>
          <artifactId>jakarta.annotation-api</artifactId>
          <version>${jakarta.annotation.api.version}</version>
        </dependency>
        <dependency>
          <groupId>org.eclipse.jetty.toolchain</groupId>
          <artifactId>jetty-javax-websocket-api</artifactId>
          <version>${jakarta.websocket.api.version}</version>
        </dependency>
        <dependency>
          <groupId>org.eclipse.jetty.ee8.websocket</groupId>
          <artifactId>jetty-ee8-websocket-javax-common</artifactId>
          <version>${project.version}</version>
        </dependency>
        <dependency>
          <groupId>org.eclipse.jetty.ee8</groupId>
          <artifactId>jetty-ee8-nested</artifactId>
          <version>${project.version}</version>
        </dependency>
        <dependency>
          <groupId>org.eclipse.jetty.ee8</groupId>
          <artifactId>jetty-ee8-security</artifactId>
          <version>${project.version}</version>
        </dependency>
        <dependency>
          <groupId>org.eclipse.jetty.ee8</groupId>
          <artifactId>jetty-ee8-servlet</artifactId>
          <version>${project.version}</version>
        </dependency>
        <dependency>
          <groupId>org.eclipse.jetty.ee8</groupId>
          <artifactId>jetty-ee8-webapp</artifactId>
          <version>${project.version}</version>
        </dependency>
        <dependency>
          <groupId>org.eclipse.jetty.ee8</groupId>
          <artifactId>jetty-ee8-servlets</artifactId>
          <version>${project.version}</version>
        </dependency>
        <dependency>
          <groupId>org.eclipse.jetty.ee8</groupId>
          <artifactId>jetty-ee8-plus</artifactId>
          <version>${project.version}</version>
        </dependency>
        <dependency>
          <groupId>org.eclipse.jetty.ee8.websocket</groupId>
          <artifactId>jetty-ee8-websocket-jetty-api</artifactId>
          <version>${project.version}</version>
        </dependency>
      </dependencies>
  </dependencyManagement>

</project>
